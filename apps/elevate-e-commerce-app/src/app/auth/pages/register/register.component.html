<section>
  <h3 class="text-center text-title text-3xl">
    {{ 'auth.register.h' | translate }}
  </h3>

  <hr class="text-zinc-400 mb-6 mt-4" />

  @if(errorMsg()) {
  <p-message severity="error" icon="pi pi-times-circle" styleClass="mb-4">{{
    errorMsg()
  }}</p-message>
  }

  <form [formGroup]="registerForm" (ngSubmit)="register()">
    <div class="flex flex-col gap-4">
      <div class="flex items-center gap-5">
        <div>
          @let fNameCtrl = registerForm.get("firstName");

          <app-base-input
            [label]="'auth.input.firstName' | translate"
            type="text"
            placeholder="Jonathan"
            formControlName="firstName"
          />

          @if (fNameCtrl?.errors && fNameCtrl?.touched) {
          <p-message severity="error" variant="simple">
            @if (fNameCtrl?.getError("required")) { First name is required!! }
            @else if (fNameCtrl?.getError("minlength") ||
            fNameCtrl?.getError("maxlength")) { At least 3 chars and up to 15
            chars long. }
          </p-message>
          }
        </div>

        <div>
          @let lNameCtrl = registerForm.get("lastName");

          <app-base-input
            [label]="'auth.input.lastName' | translate"
            type="text"
            placeholder="Adrian"
            formControlName="lastName"
          />

          @if (lNameCtrl?.errors && lNameCtrl?.touched) {
          <p-message severity="error" variant="simple">
            @if (lNameCtrl?.getError("required")) { Last name is required!! }
            @else if (lNameCtrl?.getError("minlength") ||
            lNameCtrl?.getError("maxlength")) { At least 3 chars and up to 15
            chars long. }
          </p-message>
          }
        </div>
      </div>

      <div>
        @let emailCtrl = registerForm.get("email");

        <app-base-input
          [label]="'auth.input.email' | translate"
          type="email"
          placeholder="user@example.com"
          formControlName="email"
        />

        @if (emailCtrl?.errors && emailCtrl?.touched) {
        <p-message severity="error" variant="simple">
          @if (emailCtrl?.getError("required")) { Email is required!! } @else if
          (emailCtrl?.getError("email")) { Email is invalid! }
        </p-message>
        }
      </div>

      <div>
        @let phoneCtrl = registerForm.get('phone');

        <app-base-input
          [label]="'auth.input.phone' | translate"
          type="tel"
          placeholder="+201012345678"
          formControlName="phone"
        />

        @if (phoneCtrl?.errors && phoneCtrl?.touched) {
        <p-message severity="error" variant="simple">
          @if (phoneCtrl?.getError("required")) { Phone is required!! } @else if
          (phoneCtrl?.getError("pattern")) { Phone number must start with +20 }
        </p-message>
        }
      </div>

      <div>
        @let genderdCtrl = registerForm.get("gender");

        <label class="block capitalize text-sm font-medium" for="">{{
          'auth.input.gender' | translate
        }}</label>
        <select
          class="w-full p-4 rounded-rd-sm border-2 border-zinc-300 placeholder:text-zinc-400 cursor-pointer"
          formControlName="gender"
        >
          <option aria-readonly="true">Select gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>

        @if (genderdCtrl?.errors && genderdCtrl?.touched) { @if
        (genderdCtrl?.getError("required")) {
        <p-message severity="error" variant="simple">
          Gender is required!!
        </p-message>
        } }
      </div>

      <div>
        @let passwordCtrl = registerForm.get("password");

        <app-base-input
          [label]="'auth.input.password' | translate"
          type="password"
          placeholder="********"
          formControlName="password"
        />

        @if (passwordCtrl?.errors && passwordCtrl?.touched) {
        <p-message severity="error" variant="simple">
          @if (passwordCtrl?.getError("required")) { Password is required!! }
          @else if (passwordCtrl?.getError("pattern")) { Password must have
          atleast one uppercase, lowercase, number and special char!! }
        </p-message>
        }
      </div>

      <div>
        @let rePasswordCtrl = registerForm.get('rePassword');

        <app-base-input
          [label]="'auth.input.confirmPassword' | translate"
          type="password"
          placeholder="********"
          formControlName="rePassword"
        />

        @if ((registerForm.errors?.['misMatch'] || rePasswordCtrl?.errors) &&
        rePasswordCtrl?.touched) {
        <p-message severity="error" variant="simple">
          @if (rePasswordCtrl?.getError("required")) { Confirm Password is
          required!! } @else if (registerForm.errors?.['misMatch']) { Password
          and Confirm Password are not matched!! }
        </p-message>
        }
      </div>
    </div>

    <app-submit-btn
      [isSubmitting]="isSubmitting()"
      [label]="'auth.register.create' | translate"
    />

    <hr class="text-zinc-400 my-5" />

    <p class="text-center">
      <span>{{ 'auth.register.alreadyHaveAccount' | translate }}</span>
      <a class="text-main" routerLink="/auth/login">
        {{ 'auth.register.loginLink' | translate }}</a
      >
    </p>
  </form>
</section>
