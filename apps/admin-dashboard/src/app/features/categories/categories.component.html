<main class="m-4 p-6 flex flex-col gap-5">
  <app-feature-heading headText="All Categories" btnText="Add a new category" />

  <div>
    <div class="card">
      <p-table
        #dt2
        [value]="categories()"
        dataKey="id"
        [rows]="10"
        [rowsPerPageOptions]="[10, 25, 50]"
        [loading]="false"
        [paginator]="true"
        [globalFilterFields]="['name', 'category.productsCount']"
        [tableStyle]="{ width: '100%' }"
      >
        <ng-template #caption>
          <div class="grid relative">
            <input
              pInputText
              type="text"
              placeholder="Search..."
              class="p-4 ps-11 border border-zinc-300 rounded-rd-sm"
              (input)="dt2.filterGlobal($event.target.value, 'contains')"
            />

            <span class="absolute top-1/2 left-4 -translate-y-1/2">
              <i class="pi pi-search"></i>
            </span>
          </div>
        </ng-template>

        <ng-template #header>
          <tr>
            <th style="width: 22%">Name</th>
            <th style="width: 22%">Products</th>
            <th style="width: 22%"></th>
          </tr>
        </ng-template>

        <ng-template #body let-category>
          <tr>
            <td>
              {{ category.name }}
            </td>

            <td>{{ category.productsCount }} products</td>

            <td class="flex justify-end">
              <app-action-btns
                [categoryId]="category._id"
                [openId]="openId()"
                (setOpenId)="changeId($event)"
              />
            </td>
          </tr>
        </ng-template>
        <ng-template #emptymessage>
          <tr>
            <td colspan="3">No categories found.</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</main>
